##### VueRouter vueå‰ç«¯è·¯ç”±

vueé¡µé¢å¼€å‘ä¸­ æ¯ä¸€ä¸ªè¦å®ç°çš„ç‹¬ç«‹é¡µé¢å†…å®¹éƒ½æ˜¯é€šè¿‡ç»„ä»¶æ¥å®Œæˆçš„





router è·¯ç”±ç®¡ç†è€… æ–°å»ºVueå¯¹è±¡éœ€è¦é…ç½®æ­¤é¡¹

route å•ä¸ªè·¯ç”± å¯¹è±¡

routes è·¯ç”±ä»¬ (å®šä¹‰è·¯ç”±ç»„ä»¶å…³ç³»æ˜ å°„å…³ç³»çš„æ•°ç»„)

routes[route1,route2]



route{name:xx,path:yy,component:zz} pathå³url,componentå³ç»„ä»¶å,nameä¸æ˜¯å¿…é¡»çš„





routerçš„ç»„ä»¶ router-view router-link



router-view : ç›¸å½“äºå ä½ç¬¦,ç”¨äºå±•ç¤ºä¸å½“å‰urlåŒ¹é…çš„ç»„ä»¶å†…å®¹(routeå¯¹è±¡ä¸­çš„component)



router-link : ä¼šè¢«æ¸²æŸ“æˆaæ ‡ç­¾ï¼Œä½†æ˜¯ä¼šå¢åŠ clickäº‹ä»¶ï¼Œé˜»æ­¢é»˜è®¤è¡Œä¸º(è·³è½¬å’Œå‘è¯·æ±‚)ï¼Œ

æ ¹æ®hashæ¨¡å¼æˆ–historyæ¨¡å¼è¿›è¡Œä¸åŒå¤„ç†ï¼›

historyæ¨¡å¼å¢åŠ pushStateäº‹ä»¶ï¼Œhashæ¨¡å¼ç”¨ä¸Šäº†onhashchangeäº‹ä»¶(å›é¡¾ä¸‹ç¡®å®š)



åˆ‡è®° æŠŠurlæ”¾åœ¨åœ°å€æ ç„¶åå›è½¦ æ˜¯é€šè¿‡æµè§ˆå™¨å‘è¯·æ±‚ç»™åç«¯ å¦‚æœæ²¡æœ‰é…åç«¯è·¯ç”± å°±ä¼šæŒ‚æ‰

ä½†æ˜¯åœ¨é¡µé¢ä¸Šç‚¹å‡»æ ‡ç­¾ å°±æ²¡æœ‰ç»™åç«¯å‘è¯·æ±‚





åŠ¨æ€è·¯ç”±

path-to-regexpæ¨¡å¼  path: â€˜/:idâ€™





$route å½“å‰è·¯ç”±ä¿¡æ¯ åŒ…æ‹¬pathã€paramsç­‰å±æ€§

$router ä¸ºnewå‡ºæ¥çš„routerå¯¹è±¡å®ä¾‹



ä¼ æ•°æ®

$route.params.id 

$route.query.id é€šè¿‡æŸ¥è¯¢å‚æ•°?



router-linkæ¿€æ´»çš„ç±»å router-link-active(åŒ…å«åŒ¹é…) router-link-exact-active(ç²¾ç¡®åŒ¹é…)

==ğŸ’¡å‘ç‚¹:==

å¯èƒ½éœ€è¦é»˜è®¤é€‰ä¸­é¡¹(ç¬¬ä¸€é¡¹)è¿›è¡Œç²¾ç¡®åŒ¹é…ï¼Œå…¶ä»–é¡¹è¿›è¡ŒåŒ…å«åŒ¹é…

é»˜è®¤é¡¹router-linkæ ‡ç­¾åŠ ä¸Šå±æ€§exactå³å˜æˆç²¾ç¡®åŒ¹é…



router-link tagå±æ€§ ä¸é»˜è®¤æ¸²æŸ“æˆa è€Œæ˜¯æ¸²æŸ“æˆå†™åœ¨tagåçš„æ ‡ç­¾



==åµŒå¥—è·¯ç”±ä¸¤ä¸ªæ ¸å¿ƒ==

routesé€‰é¡¹ä¸­è®¾ç½®è·¯ç”±çš„åŒ…å«å…³ç³»ï¼Œåœ¨æŸä¸ªrouteå¯¹è±¡ä¸­è®¾ç½®children routesæ•°ç»„

å­è·¯ç”±ç»„ä»¶å‡ºç°åœ¨çˆ¶çº§è·¯ç”±ç»„ä»¶é¡µé¢ä¸­çš„å“ªä¸ªä½ç½®



==å‘½åè·¯ç”±== æ›´æ–¹ä¾¿ä»¥åç®¡ç†å’Œä¿®æ”¹è·¯å¾„



==å‘½åè§†å›¾== router-viewèµ·å ä¸€ä¸ªé¡µé¢å¯èƒ½åŒ…å«å¤šä¸ªé¡µé¢ç»„åˆ ç”¨nameæ¥æ ‡è¯†ä»–ä»¬



==é‡å®šå‘==

{path:â€˜/listâ€™,redirect:â€˜/lâ€™} è®¿é—®listæ—¶é‡å®šå‘åˆ°l







###### è·¯ç”±ç»„ä»¶ä¼ å‚

åœ¨ä¸€ä¸ªç»„ä»¶ä¸­å¤ç”¨å¦ä¸€ä¸ªç»„ä»¶ï¼Œéƒ½ç»Ÿä¸€ä»propsä¸­æ‹¿ï¼Œè€Œä¸æ˜¯ä»$route.paramsæˆ–\$route.queryä¸­æ‹¿





###### è·¯ç”±å®ˆå«

æœ€å…¨è§£é‡Š:

https://router.vuejs.org/zh/guide/advanced/navigation-guards.html



==å…¨å±€å‰ç½®å®ˆå«== å¯¼èˆªè¢«ç¡®è®¤ä¹‹å‰

router.beforeEach((to,from,next)=>{//è·¯ç”±è·³è½¬å‰çš„ä¸šåŠ¡é€»è¾‘})

next()è°ƒç”¨ æ‰å¯ä»¥æ­£å¸¸è·³è½¬åˆ°è·¯ç”±é¡µ

å½“è·¯ç”±å‘ç”Ÿå˜åŒ–æ—¶ï¼Œå…¨å±€beforeEachå°±ä¼šè¢«è§¦å‘ï¼Œ

æˆ‘ä»¬å¯ä»¥åœ¨è¿™ä¸ªå‡½æ•°ä¸­åŠ å…¥ä¸€äº›ä¸šåŠ¡å¤„ç†ï¼Œä¾‹å¦‚æƒé™éªŒè¯ï¼Œå¦‚æœé€šè¿‡åˆ™è°ƒç”¨nextè¿›å…¥ç›®æ ‡è·¯ç”±é¡µ

demoä¾‹å­: ç™»å½•éªŒè¯ å¦‚æœæ²¡ç™»å½• ç‚¹å…¶ä»–é¡µéƒ½è·³åˆ°ç™»å½•é¡µï¼Œç™»å½•äº†å°±æ­£å¸¸è·³è½¬



to å³å°†è¦è¿›å…¥çš„ç›®æ ‡ ==è·¯ç”±å¯¹è±¡==

from å½“å‰æ­£è¦ç¦»å¼€çš„ ==è·¯ç”±å¯¹è±¡== å¦‚æœnameçœ‹ä¸å‡ºæ¥å¯ä»¥çœ‹å®ƒçš„fullPathæ¥åˆ¤æ–­æ˜¯å“ªä¸ªè·¯ç”±





==å…¨å±€åç½®å®ˆå«== å¯¼èˆªè¢«ç¡®è®¤ä¹‹å

router.afterEach



==å•ç‹¬è·¯ç”±ç‹¬äº«çš„å®ˆå«==

æŸä¸€ä¸ªè·¯ç”±æƒ³åšä¸€äº›ä¸å…¨å±€æ— å…³çš„äº‹æƒ… å¤šä¸ªè·¯ç”±çš„è¯ç”¨å…¨å±€å®ˆå«

è·¯ç”±å¯¹è±¡ä¸­é…ç½®beforeEnter(to,from,next){}

{name:xx,path:yy,component:zz,beforeEnter(to,from,next){}}



ä¸åœ¨å…¨å±€ç”¨è·¯ç”±å®ˆå« ç„¶åå•ä¸ªè·¯ç”±åŠ ä¸Šmeta



å¤šä¸ªé‡Œå¤´æœ‰ä¸€ä¸ªæœ‰ç‰¹æ®Šéœ€æ±‚ å¯ä»¥ç”¨è·¯ç”±ç‹¬äº«å®ˆå«



å¤šä¸ªé‡Œå¤´æœ‰å¤šä¸ªæœ‰ç‰¹æ®Šéœ€æ±‚ å¯ä»¥ç”¨å…¨å±€å®ˆå«+ å¤šä¸ªè·¯ç”±å…ƒä¿¡æ¯



###### è·¯ç”±å…ƒä¿¡æ¯meta

åœ¨è·¯ç”±ä¸­é…ç½®

åŠ å…¥å¯ä¾›æŸ¥çœ‹çš„ä¸€äº›è·¯ç”±çš„ä¿¡æ¯ åšä¸€äº›æ‰¹é‡xxæˆ–è€…æ‰¹é‡ä¸xxçš„å·¥ä½œ



###### è·¯ç”±è·³è½¬

router.push({name: â€˜loginâ€™}) è·³è½¬åˆ°loginè·¯ç”±é¡µ

åœ¨è·¯ç”±å®ˆå«ä¸­å¯ä»¥ç®€å†™ä¸º next({name:â€˜loginâ€™})



###### ç»„ä»¶å†…çš„å®ˆå« 

ç±»ä¼¼ç”Ÿå‘½å‘¨æœŸ

to from next

beforeRouteEnter  ä¸èƒ½è·å–this!!! å› ä¸ºç»„ä»¶éƒ½æ²¡æ¸²æŸ“å‡ºæ¥å‘¢!! ç”¨toå°±ç›¸å½“äºthis.$routeäº†

è¿™é‡Œå¤´çš„next(function(vm){}) functionå‚æ•°vmå°±ç›¸å½“äºç»„ä»¶å¯¹è±¡å®ä¾‹ï¼



beforeRouteUpdate ä¾‹å¦‚ /login/:id è¿™ç§ ç”±login/1åˆ‡æ¢åˆ°login/2 å°±èµ°äº†beforeRouteUpdate

beforeRouteLeave



å†™äº†çš„è¯ ä¸€å®šè¦å¤„ç†å¥½è°ƒç”¨next()çš„æ¡ä»¶å’Œé€»è¾‘!! å¦åˆ™æ— æ³•æ­£å¸¸æ‰§è¡Œ

ä¸å†™çš„è¯ ç›¸å½“äºé»˜è®¤éƒ½æ— æ¡ä»¶è°ƒäº†next() æ²¡æœ‰ç‰¹æ®Šåˆ¤æ–­é€»è¾‘





###### è·¯ç”±ç›‘å¬

watch: { â€˜$routeâ€™(to,from){}} 



##### VueXçŠ¶æ€ç®¡ç†



ä¸åŒç»„ä»¶ä¹‹é—´æƒ³å…±äº«æ•°æ®æ–¹å¼

- æŠŠæ•°æ®å‘ä¸Šå±‚æï¼Œæåˆ°å¤šä¸ªç»„ä»¶çš„ä¸Šå±‚ï¼Œå¤§å®¶éƒ½èƒ½è®¿é—®

  éœ€è¦ä¿®æ”¹æ—¶å¾€ä¸Šæ±‡æŠ¥$emit çˆ¶äº²æ¥æ”¹ï¼Œå¯èƒ½éœ€è¦ä¸åœåœ°å‘ä¸Šå‘çˆ¹

- vuexçŠ¶æ€ç®¡ç† å¤šä¸ªç»„ä»¶éƒ½éœ€è¦ä½¿ç”¨çš„å…¬æœ‰æ•°æ® æåˆ°ä»“åº“ä¸­



æŠŠåº”ç”¨ä¸­éœ€è¦å…¬ç”¨çš„æ•°æ®éƒ½äº¤ç»™ä¸€ä¸ªäººç®¡ç†ï¼Œä½¿ç”¨æ—¶ä¸éœ€è¦å±‚å±‚ä¼ é€’ï¼Œæ‰å¹³åŒ–



è¿™æ—¶ä¸è¦å®šä¹‰data(){}



å®šä¹‰computedè®¡ç®—å±æ€§ 

å½“ä»“åº“çš„æ•°æ®å‘ç”Ÿæ”¹å˜æ—¶ï¼Œè¯¥è®¡ç®—å±æ€§ä¹Ÿä¼šæ›´æ–° (ç”¨dataçš„è¯æ•°æ®å˜äº†å¯èƒ½ä¸ä¼šå¯¹åº”æ›´æ–°)

return this.$store.state.dataA



ä¸è¦ç›´æ¥ä¿®æ”¹stateä¸­çš„æ•°æ®ï¼Œè€Œæ˜¯æä¾›ä¿®æ”¹æ•°æ®çš„æ–¹æ³•æ”¾åœ¨mutationsä¸­





==ğŸ’¡æ˜“é”™ç‚¹==

methodsä¸­çš„æ–¹æ³• å‘vuex commitæ—¶ï¼Œåªèƒ½æœ‰ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°ä¸ºvuexä¸­çš„æ–¹æ³•åï¼Œç¬¬äºŒä¸ªå‚æ•°ä¸ºå¯¹è±¡

å¦‚æœæœ‰å¤šä¸ªå‚æ•°å¿…é¡»åŒ…å«åœ¨å¯¹è±¡ä¸­

ç„¶åvuexä¸­çš„mutationsçš„æ–¹æ³•çš„å‚æ•°ä¹Ÿå†™æˆå¯¹è±¡å½¢å¼



==state==

å­˜å‚¨åŸå§‹æ•°æ®çš„ä½ç½®



==è¿‡ç¨‹==

é€šè¿‡Vuex.Storeåˆ›å»ºä¸€ä¸ªå­˜å‚¨æ•°æ®çš„ä»“åº“

new Vueæ—¶é…ç½®åŠ å…¥store å…³è”èµ·æ¥ ç„¶åå°±å¯ä»¥é€šè¿‡this.$storeè®¿é—®ä»“åº“å•¦



ç»„ä»¶å°±ä¸ç”¨è‡ªå·±è°ƒmethodsäº†

é€šçŸ¥ä»“åº“Storeå»å¤„ç†å°±å¯ä»¥äº†

this.$store.commit(â€˜eventNameâ€™,payload)

æˆ– commit({type:â€˜eventNameâ€™,payload})



==ä»“åº“çš„å¤„ç†æ–¹æ³•ç»Ÿä¸€åœ¨mutationså¯¹è±¡ä¸­== æ”¾åŒæ­¥æ“ä½œå’Œä¸éœ€è¦è¿”å›å€¼çš„æ“ä½œ

mutation => commit

> ğŸ’¡æ³¨æ„:
>
> mutationå¤„ç†åŒæ­¥ä»»åŠ¡ï¼Œä½†æ˜¯ä½†æ˜¯å®ƒä¸ä¼šè¿”å›ä»»ä½•çš„å€¼(å³ä½¿å†™ä¸ªreturn 1)ï¼Œå…¶å®èƒ½å¤„ç†å¼‚æ­¥ä»»åŠ¡ä½†ä¸èƒ½è¿”å›å¼‚æ­¥ç»“æœ

ä¿®æ”¹ä»“åº“æ•°æ®çš„æ–¹æ³•åœ¨è¿™å„¿

mutationså¯¹è±¡çš„æ–¹æ³• ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºstate ç„¶åå¯ä»¥æ”¹stateä¸­çš„æ•°æ®ï¼Œç¬¬äºŒä¸ªå‚æ•°ä¸ºä¼ å…¥æ¥çš„å‚æ•°

ç¬¬äºŒä¸ªå‚æ•°å«è½½è·Payload (ä¼ è¿›æ¥çš„å®é™…å‚æ•°)



==actions== æ”¾å¼‚æ­¥æ“ä½œå’Œéœ€è¦è¿”å›å€¼çš„æ“ä½œ

action => dispatch

å¯æ¥å—å¼‚æ­¥ä»»åŠ¡å¤„ç†ï¼Œå¯ä»¥è¿”å›å¼‚æ­¥ç»“æœ





==getter== ç”¨äºstoreçš„è®¡ç®—å±æ€§

å­˜æ”¾æä¾›æ´¾ç”Ÿæ•°æ® æœ‰ç‚¹ç±»ä¼¼è®¡ç®—å±æ€§computed: ç”¨æ³•ä¹Ÿç±»ä¼¼

getters: { data(state){} }

ä½¿ç”¨: this.$store.getters.data





---



ä¸è¦dataäº† æŠŠéœ€è¦å¤šä¸ªåœ°æ–¹å…±äº«çš„æ•°æ® æ”¾åœ¨Storeå¯¹è±¡çš„stateä¸­

å±äºå•å‘ç»‘å®š





> é—®é¢˜ è™šæ‹Ÿdom
>
>
>
> vueä¸­çš„æ•°æ®å˜äº† å¹¶ä¸ä¼šå¯¼è‡´æ‰€æœ‰æ ‡ç­¾é‡æ–°æ¸²æŸ“ ä¸ä¼šæ¸²æŸ“æ•´ä¸ªdom èŠ‚çœdomæ“ä½œ
>
> è·Ÿæ•°æ®æœ‰å…³çš„domæ‰ä¼šæ”¹å˜ï¼Œå…¶ä»–çš„ä¼šç»§ç»­å¤ç”¨ ä¸ä¼šæ›´æ”¹
>
>
>
> æœ‰æ—¶å€™ä¼šæœ‰å‘ æœ‰æ—¶ä¸å¸Œæœ›æœ‰è¿™ç§å¤ç”¨æ€§
>
> ä¾‹å¦‚
>
> ```html
> <ul>
> 	<li v-for = 'user in users'>
>         <input type='checkbox'>
>         <span>{{user.username}}</span>
>     </li>
> </ul>
> ```
>
>
>
> æ¯”å¦‚æœ‰ä¸‰ç»„æ•°æ®:
>
> éšæœºæ–¹æ³•æ”¹å˜useræ•°ç»„çš„æ’åºï¼Œç„¶åè°ƒç”¨éšæœºæ–¹æ³•æ—¶ï¼Œåªæœ‰span(æ¶‰åŠäº†useræ•°æ®)ä¼šé‡æ–°æ¸²æŸ“
>
> å…¶ä»–doméƒ½ä¸ä¼šé‡æ–°æ¸²æŸ“ï¼Œæ‰€ä»¥å³ä½¿ä½ ç»™è€çš„user1æ‰“ä¸Šcheckï¼Œéšæœºä¹‹åuser2æˆäº†ç¬¬ä¸€ä½ï¼Œä½†æ˜¯è€user1çš„checkå¹¶ä¸ä¼šè·Ÿuser1ä¸€èµ·å˜ä½ç½®ï¼Œè€Œæ˜¯ä»ç„¶åœ¨ä½ç½®ä¸€ï¼Œç›¸å½“äºuser2å‰åŠ äº†check
>
> d
>
> è§£å†³æ–¹å¼: åŠ ä¸Šä¸€ä¸ªvueè‡ªå¸¦çš„v-bindå±æ€§ :key=â€˜â€™ 
>
> è€Œä¸”keyä¸èƒ½é‡å¤!!! keyä¸èƒ½ä½¿ç”¨æ•°ç»„index!!! ä¸€å®šè¦ä¸€ä¸ªæ–°å¢çš„id!!!
>
> ç»™userå¯¹è±¡æ–°åŠ ä¸€ä¸ªå­—æ®µid :key=â€˜user.idâ€™ è¿™æ ·å°±ä¼šç»™æ¯ä¸ªuseræ•°æ®æŒ‚é’©ä¸Šäº†id
>
> checkå°±ä¼šè·Ÿéšspançš„éšæœºå˜åŒ–è€Œä¸€èµ·å˜äº† 
>
> æ‰€ä»¥ç»å¸¸ä¼šçœ‹åˆ°keyç›¸å…³çš„æç¤º